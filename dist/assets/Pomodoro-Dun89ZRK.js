import{c as y,r as s,j as t,R as A,a as H}from"./index-BHH3vtVR.js";import{u as U}from"./useLocalStorage-B05wL-kv.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Y=({initialMinutes:B=0,initialSeconds:p=0,onConfirm:k,onCancel:D})=>{const[j,M]=s.useState(B),[i,b]=s.useState(p),c=(m,u,g)=>Math.max(u,Math.min(g,m));return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-6 min-w-[300px]",children:[t.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-4",children:[t.jsx("input",{type:"number",min:0,max:180,value:j,onChange:m=>M(c(Number(m.target.value),0,180)),className:"w-16 px-2 py-1 rounded border text-center text-2xl font-mono",autoFocus:!0}),t.jsx("span",{className:"text-2xl font-bold text-gray-500",children:":"}),t.jsx("input",{type:"number",min:0,max:59,value:i,onChange:m=>b(c(Number(m.target.value),0,59)),className:"w-16 px-2 py-1 rounded border text-center text-2xl font-mono"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:D,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),t.jsx("button",{onClick:()=>k(j,i),className:"px-4 py-2 rounded bg-focus-accent text-white hover:bg-opacity-90",children:"Set"})]})]})})},ee=()=>{const[B,p]=s.useState(!1),[k,D]=s.useState(50),[j,M]=s.useState("50"),[i,b]=U("pomodoroSettings",{workDuration:25,breakDuration:5,longBreakDuration:15,sessionsBeforeLongBreak:4});s.useEffect(()=>{const e=localStorage.getItem("appSettings");if(e)try{const o=JSON.parse(e);b(r=>{let a=!1;const n={...r};return typeof o.defaultPomodoroWorkDuration=="number"&&o.defaultPomodoroWorkDuration!==r.workDuration&&(n.workDuration=o.defaultPomodoroWorkDuration,a=!0),typeof o.defaultBreakDuration=="number"&&o.defaultBreakDuration!==r.breakDuration&&(n.breakDuration=o.defaultBreakDuration,a=!0),typeof o.defaultLongBreakDuration=="number"&&o.defaultLongBreakDuration!==r.longBreakDuration&&(n.longBreakDuration=o.defaultLongBreakDuration,a=!0),typeof o.defaultSessionsBeforeLongBreak=="number"&&o.defaultSessionsBeforeLongBreak!==r.sessionsBeforeLongBreak&&(n.sessionsBeforeLongBreak=o.defaultSessionsBeforeLongBreak,a=!0),a?n:r})}catch{}},[]),s.useEffect(()=>{const e=o=>{if(o.key==="appSettings")try{const r=JSON.parse(o.newValue||"");b(a=>{let n=!1;const l={...a};return typeof r.defaultPomodoroWorkDuration=="number"&&r.defaultPomodoroWorkDuration!==a.workDuration&&(l.workDuration=r.defaultPomodoroWorkDuration,n=!0),typeof r.defaultBreakDuration=="number"&&r.defaultBreakDuration!==a.breakDuration&&(l.breakDuration=r.defaultBreakDuration,n=!0),typeof r.defaultLongBreakDuration=="number"&&r.defaultLongBreakDuration!==a.longBreakDuration&&(l.longBreakDuration=r.defaultLongBreakDuration,n=!0),typeof r.defaultSessionsBeforeLongBreak=="number"&&r.defaultSessionsBeforeLongBreak!==a.sessionsBeforeLongBreak&&(l.sessionsBeforeLongBreak=r.defaultSessionsBeforeLongBreak,n=!0),n?l:a})}catch{}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const[c,m]=s.useState("pomodoro"),[u,g]=s.useState(!1),[S,N]=s.useState(0),[h,v]=s.useState(!0),F=s.useCallback(()=>{switch(c){case"pomodoro":return h?i.workDuration*60:S%i.sessionsBeforeLongBreak===0?i.longBreakDuration*60:i.breakDuration*60;case"stopwatch":case"focus":return 0;default:return i.workDuration*60}},[c,h,S,i]),[f,x]=s.useState(F()),[W,C]=s.useState(0),d=A.useRef(null),T=s.useCallback(()=>{if(!d.current){const e=new Audio("/mixkit-happy-bells-notification-937.wav");e.loop=!0,d.current=e}d.current.currentTime=0,d.current.play()},[]),L=s.useCallback(()=>{d.current&&(d.current.pause(),d.current.currentTime=0,d.current=null)},[]),R=s.useCallback(()=>{try{new Audio("/mixkit-happy-bells-notification-937.wav").play()}catch{}},[]),w=A.useRef(!1);s.useEffect(()=>{c==="pomodoro"&&f===0&&u?T():L(),c==="focus"?(f===0&&!w.current&&(R(),w.current=!0),f>0&&(w.current=!1)):w.current=!1},[c,f,u,T,L,R]);const E=s.useMemo(()=>[{name:"pomodoro",icon:H},{name:"stopwatch",icon:X},{name:"focus",icon:Q}],[]);s.useEffect(()=>{let e=null,o=null,r=null;if(u)if(c==="stopwatch"){const a=n=>{r||(r=n);const l=n-r;r=n,C(P=>P+Math.round(l/10)),o=requestAnimationFrame(a)};o=requestAnimationFrame(a)}else e=setInterval(()=>{c==="pomodoro"?x(a=>{if(a<=0){const n=S+1,l=!h,P=l?i.workDuration*60:n%i.sessionsBeforeLongBreak===0?i.longBreakDuration*60:i.breakDuration*60;return N(n),v(l),g(!1),P}return a-1}):c==="focus"&&x(a=>a<=0?(g(!1),0):a-1)},1e3);return()=>{e&&clearInterval(e),o&&cancelAnimationFrame(o),r=null}},[u,c,S,h,i]);const $=s.useCallback(()=>{g(!1),c==="pomodoro"?(v(!0),N(0),x(i.workDuration*60)):c==="stopwatch"?C(0):c==="focus"&&x(k*60)},[c,i,k]),z=s.useCallback(e=>{m(e),g(!1),N(0),v(!0),e==="pomodoro"?x(i.workDuration*60):e==="stopwatch"?C(0):e==="focus"&&x(k*60)},[i,k]),q=s.useCallback(()=>{g(e=>!e)},[]),J=e=>{const o=Math.floor(e/100),r=e%100,a=Math.floor(o/60),n=o%60;return`${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},I=e=>{const o=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return`${o>0?`${o.toString().padStart(2,"0")}:`:""}${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},O=()=>{switch(c){case"pomodoro":return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-6xl font-bold mb-6 text-focus-accent",children:I(f)}),t.jsx("div",{className:"text-lg mb-4 text-gray-600 dark:text-gray-300",children:h?"Work Session":"Break Time"})]});case"stopwatch":return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-6xl font-bold mb-6 text-focus-accent font-mono",style:{width:"8.5ch",letterSpacing:"0.05em"},children:J(W)}),t.jsx("div",{className:"text-lg mb-4 text-gray-600 dark:text-gray-300",children:"Stopwatch"})]});case"focus":return t.jsxs(t.Fragment,{children:[B&&t.jsx(Y,{initialMinutes:Math.floor(f/60),initialSeconds:f%60,onConfirm:(e,o)=>{D(e),x(e*60+o),p(!1)},onCancel:()=>p(!1)}),t.jsx("div",{className:"mb-4",children:t.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Set your focus time"})}),t.jsx("div",{className:"text-6xl font-bold mb-6 text-focus-accent cursor-pointer select-none font-mono",style:{width:"8.5ch",letterSpacing:"0.05em"},onClick:()=>!u&&p(!0),title:"Click to set time",children:I(f)}),t.jsx("div",{className:"text-lg mb-4 text-gray-600 dark:text-gray-300",children:"Focus Mode"})]});default:return null}};return t.jsxs("div",{className:"container mx-auto px-4 py-8 dark:bg-gray-900 min-h-screen flex flex-col items-center justify-center",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6 text-focus-primary dark:text-white",children:"Productivity Tracker"}),t.jsx("div",{className:"flex space-x-4 mb-6",children:E.map(({name:e,icon:o})=>t.jsxs("button",{onClick:()=>z(e),className:`px-4 py-2 rounded-full flex items-center ${c===e?"bg-focus-accent text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[t.jsx(o,{size:20,className:"mr-2"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg text-center",children:[O(),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsx("button",{onClick:q,className:"bg-focus-accent text-white p-3 rounded-full hover:bg-opacity-90",children:u?t.jsx(V,{size:24}):t.jsx(G,{size:24})}),t.jsx("button",{onClick:$,className:"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 p-3 rounded-full hover:bg-opacity-90",children:t.jsx(K,{size:24})})]})]})]})};export{ee as default};
//# sourceMappingURL=Pomodoro-Dun89ZRK.js.map
